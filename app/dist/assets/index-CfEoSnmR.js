var Yt=Object.defineProperty;var Kt=(t,e,n)=>e in t?Yt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ve=(t,e,n)=>(Kt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function I(){}function Qt(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ot(t){return t()}function ft(){return Object.create(null)}function re(t){t.forEach(Ot)}function jt(t){return typeof t=="function"}function oe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let qe;function en(t,e){return t===e?!0:(qe||(qe=document.createElement("a")),qe.href=e,t===qe.href)}function tn(t){return Object.keys(t).length===0}function Ht(t,...e){if(t==null){for(const r of e)r(void 0);return I}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function K(t){let e;return Ht(t,n=>e=n)(),e}function F(t,e,n){t.$$.on_destroy.push(Ht(e,n))}function j(t,e,n){return t.set(n),e}function h(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function He(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function G(t){return document.createTextNode(t)}function M(){return G(" ")}function _e(){return G("")}function H(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nn(t){return Array.from(t.childNodes)}function ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e){t.value=e??""}function pt(t,e,n){for(let r=0;r<t.options.length;r+=1){const o=t.options[r];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function sn(t){const e=t.querySelector(":checked");return e&&e.__value}function rn(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Ne;function he(t){Ne=t}function Ae(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function De(t){Ae().$$.on_mount.push(t)}function on(t){Ae().$$.after_update.push(t)}function rt(t){Ae().$$.on_destroy.push(t)}function ln(){const t=Ae();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=rn(e,n,{cancelable:r});return o.slice().forEach(c=>{c.call(t,l)}),!l.defaultPrevented}return!0}}const Pe=[],z=[];let Re=[];const Ke=[],cn=Promise.resolve();let Qe=!1;function an(){Qe||(Qe=!0,cn.then(ot))}function Je(t){Re.push(t)}function Ie(t){Ke.push(t)}const Ze=new Set;let Ce=0;function ot(){if(Ce!==0)return;const t=Ne;do{try{for(;Ce<Pe.length;){const e=Pe[Ce];Ce++,he(e),un(e.$$)}}catch(e){throw Pe.length=0,Ce=0,e}for(he(null),Pe.length=0,Ce=0;z.length;)z.pop()();for(let e=0;e<Re.length;e+=1){const n=Re[e];Ze.has(n)||(Ze.add(n),n())}Re.length=0}while(Pe.length);for(;Ke.length;)Ke.pop()();Qe=!1,Ze.clear(),he(t)}function un(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Je)}}function dn(t){const e=[],n=[];Re.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Re=e}const Be=new Set;let we;function ve(){we={r:0,c:[],p:we}}function Se(){we.r||re(we.c),we=we.p}function U(t,e){t&&t.i&&(Be.delete(t),t.i(e))}function B(t,e,n,r){if(t&&t.o){if(Be.has(t))return;Be.add(t),we.c.push(()=>{Be.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ee(t,e){const n=e.token={};function r(o,l,c,i){if(e.token!==n)return;e.resolved=i;let u=e.ctx;c!==void 0&&(u=u.slice(),u[c]=i);const a=o&&(e.current=o)(u);let d=!1;e.block&&(e.blocks?e.blocks.forEach((f,p)=>{p!==l&&f&&(ve(),B(f,1,1,()=>{e.blocks[p]===f&&(e.blocks[p]=null)}),Se())}):e.block.d(1),a.c(),U(a,1),a.m(e.mount(),e.anchor),d=!0),e.block=a,e.blocks&&(e.blocks[l]=a),d&&ot()}if(Qt(t)){const o=Ae();if(t.then(l=>{he(o),r(e.then,1,e.value,l),he(null)},l=>{if(he(o),r(e.catch,2,e.error,l),he(null),!e.hasCatch)throw l}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function lt(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Oe(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function ne(t){t&&t.c()}function ee(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),Je(()=>{const l=t.$$.on_mount.map(Ot).filter(jt);t.$$.on_destroy?t.$$.on_destroy.push(...l):re(l),t.$$.on_mount=[]}),o.forEach(Je)}function te(t,e){const n=t.$$;n.fragment!==null&&(dn(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function fn(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),an(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,n,r,o,l,c=null,i=[-1]){const u=Ne;he(t);const a=t.$$={fragment:null,ctx:[],props:l,update:I,not_equal:o,bound:ft(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ft(),dirty:i,skip_bound:!1,root:e.target||u.$$.root};c&&c(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(f,p,...k)=>{const g=k.length?k[0]:p;return a.ctx&&o(a.ctx[f],a.ctx[f]=g)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](g),d&&fn(t,f)),p}):[],a.update(),d=!0,re(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const f=nn(e.target);a.fragment&&a.fragment.l(f),f.forEach(S)}else a.fragment&&a.fragment.c();e.intro&&U(t.$$.fragment),ee(t,e.target,e.anchor),ot()}he(u)}class ce{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){te(this,1),this.$destroy=I}$on(e,n){if(!jt(n))return I;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!tn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pn);const Te=[];function At(t,e){return{subscribe:W(t,e).subscribe}}function W(t,e=I){let n;const r=new Set;function o(i){if(oe(t,i)&&(t=i,n)){const u=!Te.length;for(const a of r)a[1](),Te.push(a,t);if(u){for(let a=0;a<Te.length;a+=2)Te[a][0](Te[a+1]);Te.length=0}}}function l(i){o(i(t))}function c(i,u=I){const a=[i,u];return r.add(a),r.size===1&&(n=e(o,l)||I),i(t),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:c}}function Dt(t){if(t.ok)return t.value;throw t.error}var Q=(t=>(t[t.rs3=0]="rs3",t[t.osrs=1]="osrs",t))(Q||{}),ie=(t=>(t[t.osrs=0]="osrs",t[t.runeLite=1]="runeLite",t[t.hdos=2]="hdos",t[t.rs3=3]="rs3",t))(ie||{});const _n={use_dark_theme:!0,flatpak_rich_presence:!1,rs_config_uri:"",runelite_custom_jar:"",runelite_use_custom_jar:!1,selected_account:"",selected_characters:new Map,selected_game_accounts:new Map,selected_game_index:1,selected_client_index:1},Ut=At("https://bolt-internal"),hn=At("1fddee4e-b100-4f4e-b2b0-097f9088f9d2"),ct=W(),Fe=W(""),J=W({..._n}),ye=W(new Map),ge=W(!1),fe=W(),et=W(),Le=W([]),We=W({}),it=W([]),tt=W(""),qt=W(""),Bt=W(""),$t=W(""),Jt=W(""),nt=W(""),st=W(""),Y=W(!1),Ge=W(new Map),Z=W({game:Q.osrs,client:ie.runeLite}),Xe=W(!1);function bn(){se.use_dark_theme==!1&&document.documentElement.classList.remove("dark")}function gn(t,e){e&&t.win.close(),it.update(n=>(n.splice(ut.indexOf(t),1),n))}function Gt(){if(de&&de.win&&!de.win.closed)de.win.focus();else if(de&&de.win&&de.win.closed||de){const t=Ft(),e=wn();kn({origin:atob(V.origin),redirect:atob(V.redirect),authMethod:"",loginType:"",clientid:atob(V.clientid),flow:"launcher",pkceState:t,pkceCodeVerifier:e}).then(n=>{const r=window.open(n,"","width=480,height=720");We.set({state:t,verifier:e,win:r})})}}function mn(){const t=new URLSearchParams(window.location.search);Fe.set(t.get("platform")),tt.set(t.get("rs3_deb_installed_hash")),qt.set(t.get("rs3_exe_installed_hash")),Bt.set(t.get("rs3_app_installed_hash")),$t.set(t.get("osrs_exe_installed_hash")),Jt.set(t.get("osrs_app_installed_hash")),nt.set(t.get("runelite_installed_id")),st.set(t.get("hdos_installed_version"));const e=t.get("plugins");e!==null?(ge.set(!0),fe.set(JSON.parse(e))):ge.set(!1);const n=t.get("credentials");if(n)try{JSON.parse(n).forEach(l=>{ye.update(c=>(c.set(l.sub,l),c))})}catch(o){q(`Couldn't parse credentials file: ${o}`,!1)}const r=t.get("config");if(r)try{const o=JSON.parse(r);J.set(o),J.update(l=>(l.selected_game_accounts?(l.selected_characters=new Map(Object.entries(l.selected_game_accounts)),delete l.selected_game_accounts):l.selected_characters&&(l.selected_characters=new Map(Object.entries(l.selected_characters))),l))}catch(o){q(`Couldn't parse config file: ${o}`,!1)}}async function Xt(t,e,n){return new Promise(r=>{if(t.expiry-Date.now()<3e4){const o=new URLSearchParams({grant_type:"refresh_token",client_id:n,refresh_token:t.refresh_token}),l=new XMLHttpRequest;l.onreadystatechange=()=>{if(l.readyState==4)if(l.status==200){const c=zt(l.response),i=Dt(c);i?(t.access_token=i.access_token,t.expiry=i.expiry,t.id_token=i.id_token,t.login_provider=i.login_provider,t.refresh_token=i.refresh_token,i.session_id&&(t.session_id=i.session_id),t.sub=i.sub,r(null)):r(0)}else r(l.status)},l.onerror=()=>{r(0)},l.open("POST",e,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.setRequestHeader("Accept","application/json"),l.send(o)}else r(null)})}function zt(t){const e=JSON.parse(t),n=e.id_token.split(".");if(n.length!==3){const l=`Malformed id_token: ${n.length} sections, expected 3`;return q(l,!1),{ok:!1,error:new Error(l)}}const r=JSON.parse(atob(n[0]));if(r.typ!=="JWT"){const l=`Bad id_token header: typ ${r.typ}, expected JWT`;return q(l,!1),{ok:!1,error:new Error(l)}}const o=JSON.parse(atob(n[1]));return{ok:!0,value:{access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,sub:o.sub,login_provider:o.login_provider||null,expiry:Date.now()+e.expires_in*1e3,session_id:e.session_id}}}async function kn(t){const e=new TextEncoder().encode(t.pkceCodeVerifier),n=await crypto.subtle.digest("SHA-256",e);let r="";const o=new Uint8Array(n);for(let c=0;c<o.byteLength;c++)r+=String.fromCharCode(o[c]);const l=btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");return t.origin.concat("/oauth2/auth?").concat(new URLSearchParams({auth_method:t.authMethod,login_type:t.loginType,flow:t.flow,response_type:"code",client_id:t.clientid,redirect_uri:t.redirect,code_challenge:l,code_challenge_method:"S256",prompt:"login",scope:"openid offline gamesso.token.create user.profile.read",state:t.pkceState}).toString())}function wn(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",e=new Uint32Array(43);return crypto.getRandomValues(e),Array.from(e,function(n){return t[n%t.length]}).join("")}function Ft(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=e.length-1,r=crypto.getRandomValues(new Uint8Array(12));return Array.from(r).map(o=>Math.round(o*(n-0)/255+0)).map(o=>e[o]).join("")}async function Wt(t,e,n){return new Promise(r=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{o.readyState==4&&(o.status==200?n.then(l=>{if(typeof l!="number"){const c={id:l.id,userId:l.userId,displayName:l.displayName,suffix:l.suffix,characters:new Map};$(`Successfully added login for ${c.displayName}`),JSON.parse(o.response).forEach(i=>{c.characters.set(i.accountId,{accountId:i.accountId,displayName:i.displayName,userHash:i.userHash})}),Sn(c),r(!0)}else q(`Error getting account info: ${l}`,!1),r(!1)}):(q(`Error: from ${e}: ${o.status}: ${o.response}`,!1),r(!1)))},o.open("GET",e,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","Bearer ".concat(t.session_id)),o.send()})}async function _t(t,e){return await yn(t,e)}async function yn(t,e){const n=Ft(),r=crypto.randomUUID(),o=atob(V.origin).concat("/oauth2/auth?").concat(new URLSearchParams({id_token_hint:e.id_token,nonce:btoa(r),prompt:"consent",redirect_uri:"http://localhost",response_type:"id_token code",state:n,client_id:K(hn),scope:"openid offline"}).toString()),l=vn(e);return t?(t.location.href=o,it.update(c=>(c.push({state:n,nonce:r,creds:e,win:t,account_info_promise:l}),c)),!1):e.session_id?await Wt(e,atob(V.auth_api).concat("/accounts"),l):(q("Rejecting stored credentials with missing session_id",!1),!1)}function vn(t){return new Promise(e=>{const n=`${atob(V.api)}/users/${t.sub}/displayName`,r=new XMLHttpRequest;r.onreadystatechange=()=>{r.readyState==4&&(r.status==200?e(JSON.parse(r.response)):e(r.status))},r.open("GET",n,!0),r.setRequestHeader("Authorization","Bearer ".concat(t.access_token)),r.send()})}function Sn(t){const e=()=>{Z.update(n=>{n.account=t;const[r]=t.characters.keys();return n.character=t.characters.get(r),ke.size>0&&(n.credentials=ke.get(t.userId)),n})};Ge.update(n=>(n.set(t.userId,t),n)),ze.account&&se.selected_account?t.userId==se.selected_account&&e():ze.account||e(),We.set({})}function Ln(t,e,n){return new Promise(r=>{const o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=()=>{o.readyState==4&&r(o.status)},o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(new URLSearchParams({token:t,client_id:n}))})}async function Me(){const t=new XMLHttpRequest;t.open("POST","/save-credentials",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=()=>{t.readyState==4&&$(`Save-credentials status: ${t.responseText.trim()}`)},Z.update(n=>{var r;return n.credentials=ke.get((r=ze.account)==null?void 0:r.userId),n});const e=[];ke.forEach(n=>{e.push(n)}),t.send(JSON.stringify(e))}function xn(t,e,n){Ue();const r=(i,u)=>{const a=new XMLHttpRequest,d={};i&&(d.hash=i),t&&(d.jx_session_id=t),e&&(d.jx_character_id=e),n&&(d.jx_display_name=n),se.rs_plugin_loader&&(d.plugin_loader="1"),se.rs_config_uri?d.config_uri=se.rs_config_uri:d.config_uri=atob(V.default_config_uri),a.open("POST","/launch-rs3-deb?".concat(new URLSearchParams(d).toString()),!0),a.onreadystatechange=()=>{a.readyState==4&&($(`Game launch status: '${a.responseText.trim()}'`),a.status==200&&i&&tt.set(i))},a.send(u)},o=new XMLHttpRequest,l=atob(V.content_url),c=l.concat("dists/trusty/non-free/binary-amd64/Packages");o.open("GET",c,!0),o.onreadystatechange=()=>{if(o.readyState==4&&o.status==200){const i=Object.fromEntries(o.response.split(`
`).map(u=>u.split(": ")));if(!i.Filename||!i.Size){q(`Could not parse package data from URL: ${c}`,!1),r();return}if(i.SHA256!==K(tt)){$("Downloading RS3 client...");const u=new XMLHttpRequest;u.open("GET",l.concat(i.Filename),!0),u.responseType="arraybuffer",u.onprogress=a=>{a.loaded&&Le.update(d=>(d[0].text=`Downloading RS3 client... ${(Math.round(1e3*a.loaded/a.total)/10).toFixed(1)}%`,d))},u.onreadystatechange=()=>{u.readyState==4&&u.status==200&&r(i.SHA256,u.response)},u.onerror=()=>{q(`Error downloading game client: from ${c}: non-http error`,!1),r()},u.send()}else $("Latest client is already installed"),r()}},o.onerror=()=>{q(`Error: from ${c}: non-http error`,!1),r()},o.send()}function Vt(t,e,n,r){Ue();const o=r?"/launch-runelite-jar-configure?":"/launch-runelite-jar?",l=(u,a,d)=>{const f=new XMLHttpRequest,p={};u&&(p.id=u),d&&(p.jar_path=d),t&&(p.jx_session_id=t),e&&(p.jx_character_id=e),n&&(p.jx_display_name=n),se.flatpak_rich_presence&&(p.flatpak_rich_presence=""),f.open(a?"POST":"GET",o.concat(new URLSearchParams(p).toString()),!0),f.onreadystatechange=()=>{f.readyState==4&&($(`Game launch status: '${f.responseText.trim()}'`),f.status==200&&u&&nt.set(u))},f.send(a)};if(se.runelite_use_custom_jar){l(null,null,se.runelite_custom_jar);return}const c=new XMLHttpRequest,i="https://api.github.com/repos/runelite/launcher/releases";c.open("GET",i,!0),c.onreadystatechange=()=>{if(c.readyState==4)if(c.status==200){const u=JSON.parse(c.responseText).map(a=>a.assets).flat().find(a=>a.name.toLowerCase()=="runelite.jar");if(u.id!=K(nt)){$("Downloading RuneLite...");const a=new XMLHttpRequest;a.open("GET",u.browser_download_url,!0),a.responseType="arraybuffer",a.onreadystatechange=()=>{a.readyState==4&&(a.status==200?l(u.id,a.response):q(`Error downloading from ${u.url}: ${a.status}: ${a.responseText}`,!1))},a.onprogress=d=>{d.loaded&&d.lengthComputable&&Le.update(f=>(f[0].text=`Downloading RuneLite... ${(Math.round(1e3*d.loaded/d.total)/10).toFixed(1)}%`,f))},a.send()}else $("Latest JAR is already installed"),l()}else q(`Error from ${i}: ${c.status}: ${c.responseText}`,!1)},c.send()}function Cn(t,e,n){return Vt(t,e,n,!1)}function Tn(t,e,n){return Vt(t,e,n,!0)}function Pn(t,e,n){Ue();const r=(c,i)=>{const u=new XMLHttpRequest,a={};c&&(a.version=c),t&&(a.jx_session_id=t),e&&(a.jx_character_id=e),n&&(a.jx_display_name=n),u.open("POST","/launch-hdos-jar?".concat(new URLSearchParams(a).toString()),!0),u.onreadystatechange=()=>{u.readyState==4&&($(`Game launch status: '${u.responseText.trim()}'`),u.status==200&&c&&st.set(c))},u.send(i)},o=new XMLHttpRequest,l="https://cdn.hdos.dev/client/getdown.txt";o.open("GET",l,!0),o.onreadystatechange=()=>{if(o.readyState==4)if(o.status==200){const c=o.responseText.match(/^launcher\.version *= *(.*?)$/m);if(c&&c.length>=2){const i=c[1];if(i!==K(st)){const u=`https://cdn.hdos.dev/launcher/v${i}/hdos-launcher.jar`;$("Downloading HDOS...");const a=new XMLHttpRequest;a.open("GET",u,!0),a.responseType="arraybuffer",a.onreadystatechange=()=>{if(a.readyState==4)if(a.status==200)r(i,a.response);else{const d=JSON.parse(o.responseText).map(f=>f.assets).flat().find(f=>f.name.toLowerCase()=="runelite.jar");q(`Error downloading from ${d.url}: ${a.status}: ${a.responseText}`,!1)}},a.onprogress=d=>{d.loaded&&d.lengthComputable&&Le.update(f=>(f[0].text=`Downloading HDOS... ${(Math.round(1e3*d.loaded/d.total)/10).toFixed(1)}%`,f))},a.send()}else $("Latest JAR is already installed"),r()}else $("Couldn't parse latest launcher version"),r()}else q(`Error from ${l}: ${o.status}: ${o.responseText}`,!1)},o.send()}let Ye=!1;function Ue(){var t;if(K(Y)&&!Ye){Ye=!0;const e=new XMLHttpRequest;e.open("POST","/save-config",!0),e.onreadystatechange=()=>{e.readyState==4&&($(`Save config status: '${e.responseText.trim()}'`),e.status==200&&Y.set(!1),Ye=!1)},e.setRequestHeader("Content-Type","application/json");const n={};(t=se.selected_characters)==null||t.forEach((l,c)=>{n[c]=l});const r={};Object.assign(r,se),r.selected_characters=n;const o=JSON.stringify(r,null,4);e.send(o)}}function Zt(){return new Promise((t,e)=>{const n=new XMLHttpRequest,r=K(Ut).concat("/list-game-clients");n.open("GET",r,!0),n.onreadystatechange=()=>{if(n.readyState==4)if(n.status==200&&n.getResponseHeader("content-type")==="application/json"){const o=JSON.parse(n.responseText);t(Object.keys(o).map(l=>({uid:l,identity:o[l].identity||null})))}else e(`error (${n.responseText})`)},n.send()})}function Rn(){const t=new XMLHttpRequest;t.open("POST","/save-plugin-config",!0),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=()=>{t.readyState==4&&$(`Save-plugin-config status: ${t.responseText.trim()}`)},t.send(JSON.stringify(K(fe)))}async function ht(t,e,n,r,o){Ue();const l=`${e?"osrs":atob(V.provider)}-${t?"win":"mac"}`,c=t?e?$t:qt:e?Jt:Bt,i=async(O,C)=>{const b={};O&&(b.hash=O),n&&(b.jx_session_id=n),r&&(b.jx_character_id=r),o&&(b.jx_display_name=o);const T=await fetch(`/launch-${e?"osrs":"rs3"}-${t?"exe":"app"}?${new URLSearchParams(b).toString()}`,{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:await C});T.text().then(D=>$(`Game launch status: '${D.trim()}'`)),T.status==200&&O&&c.set(O)},u=`${atob(V.direct6_url)}${l}/${l}.json`,a=await fetch(u,{method:"GET"}),d=await a.text();if(a.status!==200){q(`Error from ${u}: ${a.status}: ${d}`,!1);return}const f=JSON.parse(atob(d.split(".")[1])).environments.production;if(K(c)===f.id){$("Latest client is already installed"),i();return}$(`Downloading client version ${f.version}`);const p=`${atob(V.direct6_url)}${l}/catalog/${f.id}/catalog.json`,k=await fetch(p,{method:"GET"}),g=await k.text();if(k.status!==200){q(`Error from ${p}: ${k.status}: ${g}`,!1);return}const E=JSON.parse(atob(g.split(".")[1])),N=E.metafile.replace(/^http:/i,"https:"),y=await fetch(N,{method:"GET"}),v=await y.text();if(y.status!==200){q(`Error from ${N}: ${y.status}: ${v}`,!1);return}const w=JSON.parse(atob(v.split(".")[1])),x=w.pieces.digests.map(O=>{const C=atob(O).split("").map(T=>T.charCodeAt(0).toString(16).padStart(2,"0")).join(""),b=E.config.remote.baseUrl.replace(/^http:/i,"https:").concat(E.config.remote.pieceFormat.replace("{SubString:0,2,{TargetDigest}}",C.substring(0,2)).replace("{TargetDigest}",C));return fetch(b,{method:"GET"}).then(T=>T.blob().then(D=>{const A=new DecompressionStream("gzip");return new Response(D.slice(6).stream().pipeThrough(A)).blob()}))});let R=0,P=null;for(let O=0;O<w.files.length;O+=1)if(t?w.files[O].name.endsWith(".exe"):w.files[O].name.includes(".app/Contents/MacOS/"))if(P!==null){q(`Error parsing ${N}: file list has multiple possibilities for main exe`,!1);return}else P=w.files[O].size;else P===null&&(R+=w.files[O].size);if(P===null){q(`Error parsing ${N}: file list has no possibilities for main exe`,!1);return}Promise.all(x).then(O=>{const C=new Blob(O).slice(R,R+P);i(w.id,C.arrayBuffer())})}function bt(t,e,n){const r=t.slice();return r[22]=e[n],r}function gt(t){let e,n=t[22][1].displayName+"",r,o,l;return{c(){e=m("option"),r=G(n),_(e,"data-id",o=t[22][1].userId),_(e,"class","dark:bg-slate-900"),e.__value=l=t[22][1].displayName,be(e,e.__value)},m(c,i){L(c,e,i),h(e,r)},p(c,i){i&4&&n!==(n=c[22][1].displayName+"")&&ae(r,n),i&4&&o!==(o=c[22][1].userId)&&_(e,"data-id",o),i&4&&l!==(l=c[22][1].displayName)&&(e.__value=l,be(e,e.__value))},d(c){c&&S(e)}}}function En(t){let e,n,r,o,l,c,i,u,a,d=pe(t[2]),f=[];for(let p=0;p<d.length;p+=1)f[p]=gt(bt(t,d,p));return{c(){e=m("div"),n=m("select");for(let p=0;p<f.length;p+=1)f[p].c();r=M(),o=m("div"),l=m("button"),l.textContent="Log In",c=M(),i=m("button"),i.textContent="Log Out",_(n,"name","account_select"),_(n,"id","account_select"),_(n,"class","w-full cursor-pointer rounded-lg border-2 border-inherit bg-inherit p-2 text-center"),_(l,"class","mx-auto mr-2 rounded-lg bg-blue-500 p-2 font-bold text-black duration-200 hover:opacity-75"),_(i,"class","mx-auto rounded-lg border-2 border-blue-500 p-2 font-bold duration-200 hover:opacity-75"),_(o,"class","mt-5 flex"),_(e,"class","z-10 w-48 rounded-lg border-2 border-slate-300 bg-slate-100 p-3 shadow dark:border-slate-800 dark:bg-slate-900"),_(e,"role","none")},m(p,k){L(p,e,k),h(e,n);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(n,null);t[7](n),h(e,r),h(e,o),h(o,l),h(o,c),h(o,i),u||(a=[H(n,"change",t[8]),H(l,"click",t[9]),H(i,"click",t[10]),H(e,"mouseenter",t[11]),H(e,"mouseleave",t[12])],u=!0)},p(p,[k]){if(k&4){d=pe(p[2]);let g;for(g=0;g<d.length;g+=1){const E=bt(p,d,g);f[g]?f[g].p(E,k):(f[g]=gt(E),f[g].c(),f[g].m(n,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=d.length}},i:I,o:I,d(p){p&&S(e),He(f,p),t[7](null),u=!1,re(a)}}}function Mn(t,e,n){let r,o,l,c;F(t,Z,b=>n(13,r=b)),F(t,ye,b=>n(14,o=b)),F(t,Ge,b=>n(2,l=b)),F(t,J,b=>n(15,c=b));let{showAccountDropdown:i}=e,{hoverAccountButton:u}=e;const a=atob(V.origin),d=atob(V.clientid),f=a.concat("/oauth2/token"),p=a.concat("/oauth2/revoke");let k=!1,g;function E(b){u||b.button===0&&i&&!k&&n(5,i=!1)}function N(){var D;if(g.options.length==0){$("Logout unsuccessful: no account selected");return}let b=r.credentials;r.account&&(l.delete((D=r.account)==null?void 0:D.userId),Ge.set(l));const T=g.selectedIndex;T>0?n(1,g.selectedIndex=T-1,g):T==0&&l.size>0?n(1,g.selectedIndex=T+1,g):(delete r.account,delete r.character,delete r.credentials),v(),b&&Xt(b,f,d).then(A=>{A===null?Ln(b.access_token,p,d).then(X=>{X===200?($("Successful logout"),y(b)):q(`Logout unsuccessful: status ${X}`,!1)}):A===400||A===401?($("Logout unsuccessful: credentials are invalid, so discarding them anyway"),b&&y(b)):q("Logout unsuccessful: unable to verify credentials due to a network error",!1)})}function y(b){o.delete(b.sub),Me()}function v(){var T;Y.set(!0);const b=g[g.selectedIndex].getAttribute("data-id");if(j(Z,r.account=l.get(b),r),j(J,c.selected_account=b,c),j(Z,r.credentials=o.get((T=r.account)==null?void 0:T.userId),r),r.account&&r.account.characters){const D=document.getElementById("character_select");D.selectedIndex=0;const[A]=r.account.characters.keys();j(Z,r.character=r.account.characters.get(A),r)}}addEventListener("mousedown",E),De(()=>{var T;let b=0;l.forEach(D=>{var A;D.displayName==((A=r.account)==null?void 0:A.displayName)&&n(1,g.selectedIndex=b,g),b++}),j(Z,r.credentials=o.get((T=r.account)==null?void 0:T.userId),r)}),rt(()=>{removeEventListener("mousedown",E)});function w(b){z[b?"unshift":"push"](()=>{g=b,n(1,g)})}const x=()=>{v()},R=()=>{Gt()},P=()=>{N()},O=()=>{n(0,k=!0)},C=()=>{n(0,k=!1)};return t.$$set=b=>{"showAccountDropdown"in b&&n(5,i=b.showAccountDropdown),"hoverAccountButton"in b&&n(6,u=b.hoverAccountButton)},[k,g,l,N,v,i,u,w,x,R,P,O,C]}class Nn extends ce{constructor(e){super(),le(this,e,Mn,En,oe,{showAccountDropdown:5,hoverAccountButton:6})}}function In(t){let e;return{c(){e=G("Log In")},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function On(t){var r;let e=((r=t[6].account)==null?void 0:r.displayName)+"",n;return{c(){n=G(e)},m(o,l){L(o,n,l)},p(o,l){var c;l&64&&e!==(e=((c=o[6].account)==null?void 0:c.displayName)+"")&&ae(n,e)},d(o){o&&S(n)}}}function mt(t){let e,n,r,o;function l(i){t[20](i)}let c={hoverAccountButton:t[2]};return t[1]!==void 0&&(c.showAccountDropdown=t[1]),n=new Nn({props:c}),z.push(()=>Oe(n,"showAccountDropdown",l)),{c(){e=m("div"),ne(n.$$.fragment),_(e,"class","absolute right-2 top-[72px]")},m(i,u){L(i,e,u),ee(n,e,null),o=!0},p(i,u){const a={};u&4&&(a.hoverAccountButton=i[2]),!r&&u&2&&(r=!0,a.showAccountDropdown=i[1],Ie(()=>r=!1)),n.$set(a)},i(i){o||(U(n.$$.fragment,i),o=!0)},o(i){B(n.$$.fragment,i),o=!1},d(i){i&&S(e),te(n)}}}function jn(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N;function y(R,P){return R[6].account?On:In}let v=y(t),w=v(t),x=t[1]&&mt(t);return{c(){e=m("div"),n=m("div"),r=m("button"),r.textContent="RS3",o=M(),l=m("button"),l.textContent="OSRS",c=M(),i=m("div"),u=m("button"),u.innerHTML='<img src="svgs/lightbulb-solid.svg" class="h-6 w-6" alt="Change Theme"/>',a=M(),d=m("button"),d.innerHTML='<img src="svgs/gear-solid.svg" class="h-6 w-6" alt="Settings"/>',f=M(),p=m("button"),w.c(),k=M(),x&&x.c(),_(r,"class","mx-1 w-20 rounded-lg border-2 border-blue-500 p-2 duration-200 hover:opacity-75"),_(l,"class","mx-1 w-20 rounded-lg border-2 border-blue-500 bg-blue-500 p-2 text-black duration-200 hover:opacity-75"),_(n,"class","m-3 ml-9 font-bold"),_(u,"class","my-3 h-10 w-10 rounded-full bg-blue-500 p-2 duration-200 hover:rotate-45 hover:opacity-75"),_(d,"class","m-3 h-10 w-10 rounded-full bg-blue-500 p-2 duration-200 hover:rotate-45 hover:opacity-75"),_(p,"class","m-2 w-48 rounded-lg border-2 border-slate-300 bg-inherit p-2 text-center font-bold text-black duration-200 hover:opacity-75 dark:border-slate-800 dark:text-slate-50"),_(i,"class","ml-auto flex"),_(e,"class","fixed top-0 flex h-16 w-screen border-b-2 border-slate-300 bg-slate-100 duration-200 dark:border-slate-800 dark:bg-slate-900")},m(R,P){L(R,e,P),h(e,n),h(n,r),t[10](r),h(n,o),h(n,l),t[12](l),h(e,c),h(e,i),h(i,u),h(i,a),h(i,d),h(i,f),h(i,p),w.m(p,null),t[16](p),h(e,k),x&&x.m(e,null),g=!0,E||(N=[H(r,"click",t[11]),H(l,"click",t[13]),H(u,"click",t[14]),H(d,"click",t[15]),H(p,"mouseenter",t[17]),H(p,"mouseleave",t[18]),H(p,"click",t[19])],E=!0)},p(R,[P]){v===(v=y(R))&&w?w.p(R,P):(w.d(1),w=v(R),w&&(w.c(),w.m(p,null))),R[1]?x?(x.p(R,P),P&2&&U(x,1)):(x=mt(R),x.c(),U(x,1),x.m(e,null)):x&&(ve(),B(x,1,1,()=>{x=null}),Se())},i(R){g||(U(x),g=!0)},o(R){B(x),g=!1},d(R){R&&S(e),t[10](null),t[12](null),w.d(),t[16](null),x&&x.d(),E=!1,re(N)}}}function Hn(t,e,n){let r,o,l;F(t,J,T=>n(21,r=T)),F(t,Y,T=>n(22,o=T)),F(t,Z,T=>n(6,l=T));let{showSettings:c}=e,i=!1,u=!1,a,d,f;function p(){let T=document.documentElement;T.classList.contains("dark")?T.classList.remove("dark"):T.classList.add("dark"),j(J,r.use_dark_theme=!r.use_dark_theme,r),j(Y,o=!0,o)}function k(T){switch(T){case Q.osrs:j(Z,l.game=Q.osrs,l),j(Z,l.client=r.selected_client_index,l),j(J,r.selected_game_index=Q.osrs,r),j(Y,o=!0,o),d.classList.add("bg-blue-500","text-black"),a.classList.remove("bg-blue-500","text-black");break;case Q.rs3:j(Z,l.game=Q.rs3,l),j(J,r.selected_game_index=Q.rs3,r),j(Y,o=!0,o),d.classList.remove("bg-blue-500","text-black"),a.classList.add("bg-blue-500","text-black");break}}function g(){if(f.innerHTML=="Log In"){Gt();return}n(1,i=!i)}De(()=>{k(r.selected_game_index)});function E(T){z[T?"unshift":"push"](()=>{a=T,n(3,a)})}const N=()=>{k(Q.rs3)};function y(T){z[T?"unshift":"push"](()=>{d=T,n(4,d)})}const v=()=>{k(Q.osrs)},w=()=>p(),x=()=>{n(0,c=!0)};function R(T){z[T?"unshift":"push"](()=>{f=T,n(5,f)})}const P=()=>{n(2,u=!0)},O=()=>{n(2,u=!1)},C=()=>g();function b(T){i=T,n(1,i)}return t.$$set=T=>{"showSettings"in T&&n(0,c=T.showSettings)},[c,i,u,a,d,f,l,p,k,g,E,N,y,v,w,x,R,P,O,C,b]}class An extends ce{constructor(e){super(),le(this,e,Hn,jn,oe,{showSettings:0})}}function Dn(t){let e,n,r,o,l,c;return{c(){e=m("div"),n=m("div"),r=M(),o=m("div"),_(n,"class","absolute left-0 top-0 z-10 h-screen w-screen backdrop-blur-sm backdrop-filter"),_(o,"class","absolute left-0 top-0 z-10 h-screen w-screen bg-black opacity-75"),_(o,"role","none")},m(i,u){L(i,e,u),h(e,n),h(e,r),h(e,o),l||(c=H(o,"click",t[1]),l=!0)},p:I,i:I,o:I,d(i){i&&S(e),l=!1,c()}}}function Un(t){const e=ln();return[e,r=>{e("click",r)}]}class at extends ce{constructor(e){super(),le(this,e,Un,Dn,oe,{})}}function qn(t){let e,n,r,o,l,c,i,u,a,d,f,p;return n=new at({}),{c(){e=m("div"),ne(n.$$.fragment),r=M(),o=m("div"),l=m("p"),l.textContent=`${t[1]}`,c=M(),i=m("p"),i.textContent=`${t[2]}`,u=M(),a=m("button"),a.textContent="I Understand",_(l,"class","p-2"),_(i,"class","p-2"),_(a,"class","m-5 rounded-lg border-2 border-blue-500 p-2 duration-200 hover:opacity-75"),_(o,"class","absolute left-1/4 top-1/4 z-20 w-1/2 rounded-lg bg-slate-100 p-5 text-center shadow-lg dark:bg-slate-900"),_(e,"id","disclaimer")},m(k,g){L(k,e,g),ee(n,e,null),h(e,r),h(e,o),h(o,l),h(o,c),h(o,i),h(o,u),h(o,a),d=!0,f||(p=H(a,"click",t[3]),f=!0)},p:I,i(k){d||(U(n.$$.fragment,k),d=!0)},o(k){B(n.$$.fragment,k),d=!1},d(k){k&&S(e),te(n),f=!1,p()}}}function Bn(t,e,n){let r;F(t,Xe,i=>n(0,r=i));const o=atob("Qm9sdCBpcyBhbiB1bm9mZmljaWFsIHRoaXJkLXBhcnR5IGxhdW5jaGVyLiBJdCdzIGZyZWUgYW5kIG9wZW4tc291cmNlIHNvZnR3YXJlIGxpY2Vuc2VkIHVuZGVyIEFHUEwgMy4wLg=="),l=atob("SmFnZXggaXMgbm90IHJlc3BvbnNpYmxlIGZvciBhbnkgcHJvYmxlbXMgb3IgZGFtYWdlIGNhdXNlZCBieSB1c2luZyB0aGlzIHByb2R1Y3Qu");return[r,o,l,()=>{j(Xe,r=!1,r)}]}class $n extends ce{constructor(e){super(),le(this,e,Bn,qn,oe,{})}}function Jn(t){let e,n,r,o;return{c(){e=m("div"),n=m("button"),n.innerHTML=`<div class="flex"><img src="svgs/database-solid.svg" alt="Browse app data" class="mr-2 h-7 w-7 rounded-lg bg-violet-500 p-1"/>
			Browse App Data</div>`,_(n,"id","data_dir_button"),_(n,"class","p-2 hover:opacity-75"),_(e,"id","general_options"),_(e,"class","col-span-3 p-5 pt-10")},m(l,c){L(l,e,c),h(e,n),r||(o=H(n,"click",t[1]),r=!0)},p:I,i:I,o:I,d(l){l&&S(e),r=!1,o()}}}function Gn(t){function e(){var r=new XMLHttpRequest;r.open("GET","/browse-data"),r.onreadystatechange=()=>{r.readyState==4&&$(`Browse status: '${r.responseText.trim()}'`)},r.send()}return[e,()=>{e()}]}class Xn extends ce{constructor(e){super(),le(this,e,Gn,Jn,oe,{})}}function zn(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N;return{c(){e=m("div"),n=m("button"),n.innerHTML=`<div class="flex"><img src="svgs/wrench-solid.svg" alt="Configure RuneLite" class="mr-2 h-7 w-7 rounded-lg bg-pink-500 p-1"/>
			Configure RuneLite</div>`,r=M(),o=m("div"),l=m("label"),l.textContent="Use custom RuneLite JAR:",c=M(),i=m("input"),u=M(),a=m("div"),d=m("textarea"),f=M(),p=m("br"),k=M(),g=m("button"),g.textContent="Select File",_(n,"id","rl_configure"),_(n,"class","p-2 pb-5 hover:opacity-75"),_(l,"for","use_custom_jar"),_(i,"type","checkbox"),_(i,"name","use_custom_jar"),_(i,"id","use_custom_jar"),_(i,"class","ml-2"),_(o,"class","mx-auto border-t-2 border-slate-300 p-2 pt-5 dark:border-slate-800"),d.disabled=!0,_(d,"name","custom_jar_file"),_(d,"id","custom_jar_file"),_(d,"class","h-10 rounded border-2 border-slate-300 bg-slate-100 text-slate-950 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50"),g.disabled=!0,_(g,"id","custom_jar_file_button"),_(g,"class","mt-1 rounded-lg border-2 border-blue-500 p-1 duration-200 hover:opacity-75"),_(a,"id","custom_jar_div"),_(a,"class","mx-auto p-2 opacity-25"),_(e,"id","osrs_options"),_(e,"class","col-span-3 p-5 pt-10")},m(y,v){L(y,e,v),h(e,n),h(e,r),h(e,o),h(o,l),h(o,c),h(o,i),t[9](i),h(e,u),h(e,a),h(a,d),t[11](d),h(a,f),h(a,p),h(a,k),h(a,g),t[13](g),t[15](a),E||(N=[H(n,"click",t[8]),H(i,"change",t[10]),H(d,"change",t[12]),H(g,"click",t[14])],E=!0)},p:I,i:I,o:I,d(y){y&&S(e),t[9](null),t[11](null),t[13](null),t[15](null),E=!1,re(N)}}}function Fn(t,e,n){let r,o,l;F(t,J,P=>n(16,r=P)),F(t,Z,P=>n(17,o=P)),F(t,Y,P=>n(18,l=P));let c,i,u,a;function d(){c.classList.toggle("opacity-25"),n(1,i.disabled=!i.disabled,i),n(2,u.disabled=!u.disabled,u),j(J,r.runelite_use_custom_jar=a.checked,r),r.runelite_use_custom_jar?i.value&&j(J,r.runelite_custom_jar=i.value,r):(n(1,i.value="",i),j(J,r.runelite_custom_jar="",r),j(J,r.runelite_use_custom_jar=!1,r)),j(Y,l=!0,l)}function f(){j(J,r.runelite_custom_jar=i.value,r),j(Y,l=!0,l)}function p(){n(3,a.disabled=!0,a),n(2,u.disabled=!0,u);var P=new XMLHttpRequest;P.onreadystatechange=()=>{P.readyState==4&&(P.status==200&&(n(1,i.value=P.responseText,i),j(J,r.runelite_custom_jar=P.responseText,r),j(Y,l=!0,l)),n(2,u.disabled=!1,u),n(3,a.disabled=!1,a))},P.open("GET","/jar-file-picker",!0),P.send()}function k(){var P,O,C;if(!o.account||!o.character){$("Please log in to configure RuneLite");return}Tn((P=o.credentials)==null?void 0:P.session_id,(O=o.character)==null?void 0:O.accountId,(C=o.character)==null?void 0:C.displayName)}De(()=>{n(3,a.checked=r.runelite_use_custom_jar,a),a.checked&&r.runelite_custom_jar?(c.classList.remove("opacity-25"),n(1,i.disabled=!1,i),n(2,u.disabled=!1,u),n(1,i.value=r.runelite_custom_jar,i)):(n(3,a.checked=!1,a),j(J,r.runelite_use_custom_jar=!1,r))});const g=()=>k();function E(P){z[P?"unshift":"push"](()=>{a=P,n(3,a)})}const N=()=>{d()};function y(P){z[P?"unshift":"push"](()=>{i=P,n(1,i)})}const v=()=>{f()};function w(P){z[P?"unshift":"push"](()=>{u=P,n(2,u)})}const x=()=>{p()};function R(P){z[P?"unshift":"push"](()=>{c=P,n(0,c)})}return[c,i,u,a,d,f,p,k,g,E,N,y,v,w,x,R]}class Wn extends ce{constructor(e){super(),le(this,e,Fn,zn,oe,{})}}function Vn(t){let e,n,r,o,l,c;return{c(){e=m("div"),n=m("label"),n.textContent="Enable Bolt plugin loader:",r=M(),o=m("input"),_(n,"for","enable_plugins"),_(o,"type","checkbox"),_(o,"name","enable_plugins"),_(o,"id","enable_plugins"),_(o,"class","ml-2"),_(e,"class","mx-auto p-2")},m(i,u){L(i,e,u),h(e,n),h(e,r),h(e,o),o.checked=t[3].rs_plugin_loader,l||(c=[H(o,"change",t[6]),H(o,"change",t[7])],l=!0)},p(i,u){u&8&&(o.checked=i[3].rs_plugin_loader)},d(i){i&&S(e),l=!1,re(c)}}}function Zn(t){let e,n,r,o,l,c,i,u,a,d,f,p=ge&&Vn(t);return{c(){e=m("div"),p&&p.c(),n=M(),r=m("div"),o=m("label"),o.textContent="Use custom config URI:",l=M(),c=m("input"),i=M(),u=m("div"),a=m("textarea"),_(o,"for","use_custom_uri"),_(c,"type","checkbox"),_(c,"name","use_custom_uri"),_(c,"id","use_custom_uri"),_(c,"class","ml-2"),_(r,"class","mx-auto p-2"),a.disabled=!0,_(a,"name","config_uri_address"),_(a,"id","config_uri_address"),_(a,"rows","4"),_(a,"class","rounded border-2 border-slate-300 bg-slate-100 text-slate-950 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-50"),a.value="		",_(u,"id","config_uri_div"),_(u,"class","mx-auto p-2 opacity-25"),_(e,"id","rs3_options"),_(e,"class","col-span-3 p-5 pt-10")},m(k,g){L(k,e,g),p&&p.m(e,null),h(e,n),h(e,r),h(r,o),h(r,l),h(r,c),t[8](c),h(e,i),h(e,u),h(u,a),t[11](a),t[12](u),d||(f=[H(c,"change",t[9]),H(a,"change",t[10])],d=!0)},p(k,[g]){ge&&p.p(k,g)},i:I,o:I,d(k){k&&S(e),p&&p.d(),t[8](null),t[11](null),t[12](null),d=!1,re(f)}}}function Yn(t,e,n){let r,o,l;F(t,ct,v=>n(13,r=v)),F(t,J,v=>n(3,o=v)),F(t,Y,v=>n(14,l=v));let c,i,u;function a(){c.classList.toggle("opacity-25"),n(1,i.disabled=!i.disabled,i),j(Y,l=!0,l),u.checked||(n(1,i.value=atob(r.default_config_uri),i),j(J,o.rs_config_uri="",o))}function d(){j(J,o.rs_config_uri=i.value,o),j(Y,l=!0,l)}De(()=>{o.rs_config_uri?(n(1,i.value=o.rs_config_uri,i),n(2,u.checked=!0,u),a()):n(1,i.value=atob(r.default_config_uri),i)});function f(){o.rs_plugin_loader=this.checked,J.set(o)}const p=()=>Y.set(!0);function k(v){z[v?"unshift":"push"](()=>{u=v,n(2,u)})}const g=()=>{a()},E=()=>{d()};function N(v){z[v?"unshift":"push"](()=>{i=v,n(1,i)})}function y(v){z[v?"unshift":"push"](()=>{c=v,n(0,c)})}return[c,i,u,o,a,d,f,p,k,g,E,N,y]}class Kn extends ce{constructor(e){super(),le(this,e,Yn,Zn,oe,{})}}function Qn(t){let e,n;return e=new Kn({}),{c(){ne(e.$$.fragment)},m(r,o){ee(e,r,o),n=!0},i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function es(t){let e,n;return e=new Wn({}),{c(){ne(e.$$.fragment)},m(r,o){ee(e,r,o),n=!0},i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function ts(t){let e,n;return e=new Xn({}),{c(){ne(e.$$.fragment)},m(r,o){ee(e,r,o),n=!0},i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function ns(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N,y,v,w,x,R,P,O,C;n=new at({}),n.$on("click",t[7]);const b=[ts,es,Qn],T=[];function D(A,X){return A[1]==A[5].general?0:A[1]==A[5].osrs?1:A[1]==A[5].rs3?2:-1}return~(x=D(t))&&(R=T[x]=b[x](t)),{c(){e=m("div"),ne(n.$$.fragment),r=M(),o=m("div"),l=m("button"),l.innerHTML='<img src="svgs/xmark-solid.svg" class="h-5 w-5" alt="Close"/>',c=M(),i=m("div"),u=m("div"),a=m("button"),d=G("General"),f=m("br"),p=M(),k=m("button"),g=G("OSRS"),E=m("br"),N=M(),y=m("button"),v=G("RS3"),w=M(),R&&R.c(),_(l,"class","absolute right-3 top-3 rounded-full bg-rose-500 p-[2px] shadow-lg duration-200 hover:rotate-90 hover:opacity-75"),_(a,"id","general_button"),_(a,"class",me),_(k,"id","osrs_button"),_(k,"class",$e),_(y,"id","rs3_button"),_(y,"class",me),_(u,"class","relative h-full border-r-2 border-slate-300 pt-10 dark:border-slate-800"),_(i,"class","grid h-full grid-cols-4"),_(o,"class","absolute left-[13%] top-[13%] z-20 h-3/4 w-3/4 rounded-lg bg-slate-100 text-center shadow-lg dark:bg-slate-900"),_(e,"id","settings")},m(A,X){L(A,e,X),ee(n,e,null),h(e,r),h(e,o),h(o,l),h(o,c),h(o,i),h(i,u),h(u,a),h(a,d),t[9](a),h(u,f),h(u,p),h(u,k),h(k,g),t[11](k),h(u,E),h(u,N),h(u,y),h(y,v),t[13](y),h(i,w),~x&&T[x].m(i,null),P=!0,O||(C=[H(l,"click",t[8]),H(a,"click",t[10]),H(k,"click",t[12]),H(y,"click",t[14])],O=!0)},p(A,[X]){let xe=x;x=D(A),x!==xe&&(R&&(ve(),B(T[xe],1,1,()=>{T[xe]=null}),Se()),~x?(R=T[x],R||(R=T[x]=b[x](A),R.c()),U(R,1),R.m(i,null)):R=null)},i(A){P||(U(n.$$.fragment,A),U(R),P=!0)},o(A){B(n.$$.fragment,A),B(R),P=!1},d(A){A&&S(e),te(n),t[9](null),t[11](null),t[13](null),~x&&T[x].d(),O=!1,re(C)}}}let $e="border-2 border-blue-500 bg-blue-500 hover:opacity-75 font-bold text-black duration-200 rounded-lg p-1 mx-auto my-1 w-3/4",me="border-2 border-blue-500 hover:opacity-75 duration-200 rounded-lg p-1 mx-auto my-1 w-3/4";function ss(t,e,n){let{showSettings:r}=e;var o=(w=>(w[w.general=0]="general",w[w.osrs=1]="osrs",w[w.rs3=2]="rs3",w))(o||{});let l=1,c,i,u;function a(w){switch(w){case 0:n(1,l=0),n(2,c.classList.value=$e,c),n(3,i.classList.value=me,i),n(4,u.classList.value=me,u);break;case 1:n(1,l=1),n(2,c.classList.value=me,c),n(3,i.classList.value=$e,i),n(4,u.classList.value=me,u);break;case 2:n(1,l=2),n(2,c.classList.value=me,c),n(3,i.classList.value=me,i),n(4,u.classList.value=$e,u);break}}function d(w){w.key==="Escape"&&n(0,r=!1)}addEventListener("keydown",d),rt(()=>{removeEventListener("keydown",d)});const f=()=>{n(0,r=!1)},p=()=>{n(0,r=!1)};function k(w){z[w?"unshift":"push"](()=>{c=w,n(2,c)})}const g=()=>{a(o.general)};function E(w){z[w?"unshift":"push"](()=>{i=w,n(3,i)})}const N=()=>{a(o.osrs)};function y(w){z[w?"unshift":"push"](()=>{u=w,n(4,u)})}const v=()=>{a(o.rs3)};return t.$$set=w=>{"showSettings"in w&&n(0,r=w.showSettings)},[r,l,c,i,u,o,a,f,p,k,g,E,N,y,v]}class rs extends ce{constructor(e){super(),le(this,e,ss,ns,oe,{showSettings:0})}}function kt(t,e,n){const r=t.slice();return r[1]=e[n],r}function os(t){var u;let e,n=((u=t[1].time)==null?void 0:u.toLocaleTimeString())+"",r,o,l=t[1].text+"",c,i;return{c(){e=m("li"),r=G(n),o=G(`
					- `),c=G(l),i=M()},m(a,d){L(a,e,d),h(e,r),h(e,o),h(e,c),h(e,i)},p(a,d){var f;d&1&&n!==(n=((f=a[1].time)==null?void 0:f.toLocaleTimeString())+"")&&ae(r,n),d&1&&l!==(l=a[1].text+"")&&ae(c,l)},d(a){a&&S(e)}}}function ls(t){var u;let e,n=((u=t[1].time)==null?void 0:u.toLocaleTimeString())+"",r,o,l=t[1].text+"",c,i;return{c(){e=m("li"),r=G(n),o=G(`
					- `),c=G(l),i=M(),_(e,"class","text-rose-500")},m(a,d){L(a,e,d),h(e,r),h(e,o),h(e,c),h(e,i)},p(a,d){var f;d&1&&n!==(n=((f=a[1].time)==null?void 0:f.toLocaleTimeString())+"")&&ae(r,n),d&1&&l!==(l=a[1].text+"")&&ae(c,l)},d(a){a&&S(e)}}}function wt(t){let e;function n(l,c){return l[1].isError?ls:os}let r=n(t),o=r(t);return{c(){o.c(),e=_e()},m(l,c){o.m(l,c),L(l,e,c)},p(l,c){r===(r=n(l))&&o?o.p(l,c):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&S(e),o.d(l)}}}function cs(t){let e,n,r,o,l=pe(t[0]),c=[];for(let i=0;i<l.length;i+=1)c[i]=wt(kt(t,l,i));return{c(){e=m("div"),n=m("div"),n.innerHTML='<img src="svgs/circle-info-solid.svg" alt="Message list icon" class="h-7 w-7 rounded-full bg-blue-500 p-[3px] duration-200"/>',r=M(),o=m("ol");for(let i=0;i<c.length;i+=1)c[i].c();_(n,"class","absolute right-2 top-2"),_(o,"id","message_list"),_(o,"class","h-full w-[105%] list-inside list-disc overflow-y-auto pl-5 pt-1 marker:text-blue-500"),_(e,"class","fixed bottom-0 h-1/4 w-screen border-t-2 border-t-slate-300 bg-slate-100 duration-200 dark:border-t-slate-800 dark:bg-slate-900")},m(i,u){L(i,e,u),h(e,n),h(e,r),h(e,o);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(o,null)},p(i,[u]){if(u&1){l=pe(i[0]);let a;for(a=0;a<l.length;a+=1){const d=kt(i,l,a);c[a]?c[a].p(d,u):(c[a]=wt(d),c[a].c(),c[a].m(o,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=l.length}},i:I,o:I,d(i){i&&S(e),He(c,i)}}}function is(t,e,n){let r;return F(t,Le,o=>n(0,r=o)),[r]}class as extends ce{constructor(e){super(),le(this,e,is,cs,oe,{})}}function yt(t,e,n){const r=t.slice();return r[14]=e[n],r}function us(t){let e,n,r;return{c(){e=m("button"),e.textContent="Plugin menu",e.disabled=!K(ge),_(e,"title",K(ge)?null:"Coming soon..."),_(e,"class","mx-auto mb-2 w-52 rounded-lg p-2 font-bold text-black duration-200 enabled:bg-blue-500 enabled:hover:opacity-75 disabled:bg-gray-500")},m(o,l){L(o,e,l),n||(r=H(e,"click",t[9]),n=!0)},p:I,d(o){o&&S(e),n=!1,r()}}}function ds(t){let e,n,r,o,l,c,i,u,a,d=t[5]!=="linux"&&vt();return{c(){e=m("label"),e.textContent="Game Client",n=M(),r=m("br"),o=M(),l=m("select"),d&&d.c(),c=m("option"),c.textContent="RuneLite",i=m("option"),i.textContent="HDOS",_(e,"for","game_client_select"),_(e,"class","text-sm"),_(c,"data-id",ie.runeLite),_(c,"class","dark:bg-slate-900"),c.__value="RuneLite",be(c,c.__value),_(i,"data-id",ie.hdos),_(i,"class","dark:bg-slate-900"),i.__value="HDOS",be(i,i.__value),_(l,"id","game_client_select"),_(l,"class","mx-auto w-52 cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800")},m(f,p){L(f,e,p),L(f,n,p),L(f,r,p),L(f,o,p),L(f,l,p),d&&d.m(l,null),h(l,c),h(l,i),t[8](l),u||(a=H(l,"change",t[6]),u=!0)},p(f,p){f[5]!=="linux"?d||(d=vt(),d.c(),d.m(l,c)):d&&(d.d(1),d=null)},d(f){f&&(S(e),S(n),S(r),S(o),S(l)),d&&d.d(),t[8](null),u=!1,a()}}}function vt(t){let e;return{c(){e=m("option"),e.textContent="OSRS Client",_(e,"data-id",ie.osrs),_(e,"class","dark:bg-slate-900"),e.__value="OSRS Client",be(e,e.__value)},m(n,r){L(n,e,r)},d(n){n&&S(e)}}}function St(t){let e,n=pe(t[4].account.characters),r=[];for(let o=0;o<n.length;o+=1)r[o]=Lt(yt(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=_e()},m(o,l){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,l);L(o,e,l)},p(o,l){if(l&16){n=pe(o[4].account.characters);let c;for(c=0;c<n.length;c+=1){const i=yt(o,n,c);r[c]?r[c].p(i,l):(r[c]=Lt(i),r[c].c(),r[c].m(e.parentNode,e))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(o){o&&S(e),He(r,o)}}}function fs(t){let e;return{c(){e=G("New Character")},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function ps(t){let e=t[14][1].displayName+"",n;return{c(){n=G(e)},m(r,o){L(r,n,o)},p(r,o){o&16&&e!==(e=r[14][1].displayName+"")&&ae(n,e)},d(r){r&&S(n)}}}function Lt(t){let e,n,r,o;function l(u,a){return u[14][1].displayName?ps:fs}let c=l(t),i=c(t);return{c(){e=m("option"),i.c(),n=M(),_(e,"data-id",r=t[14][1].accountId),_(e,"class","dark:bg-slate-900"),e.__value=o=`
						`+t[14][1].displayName+`
					`,be(e,e.__value)},m(u,a){L(u,e,a),i.m(e,null),h(e,n)},p(u,a){c===(c=l(u))&&i?i.p(u,a):(i.d(1),i=c(u),i&&(i.c(),i.m(e,n))),a&16&&r!==(r=u[14][1].accountId)&&_(e,"data-id",r),a&16&&o!==(o=`
						`+u[14][1].displayName+`
					`)&&(e.__value=o,be(e,e.__value))},d(u){u&&S(e),i.d()}}}function _s(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N;function y(R,P){if(R[4].game==Q.osrs)return ds;if(R[4].game==Q.rs3)return us}let v=y(t),w=v&&v(t),x=t[4].account&&St(t);return{c(){e=m("div"),n=m("img"),o=M(),l=m("button"),l.textContent="Play",c=M(),i=m("div"),w&&w.c(),u=M(),a=m("div"),d=m("label"),d.textContent="Character",f=M(),p=m("br"),k=M(),g=m("select"),x&&x.c(),en(n.src,r="svgs/rocket-solid.svg")||_(n,"src",r),_(n,"alt","Launch icon"),_(n,"class","mx-auto mb-5 w-24 rounded-3xl bg-gradient-to-br from-rose-500 to-violet-500 p-5"),_(l,"class","mx-auto mb-2 w-52 rounded-lg bg-emerald-500 p-2 font-bold text-black duration-200 hover:opacity-75"),_(i,"class","mx-auto my-2"),_(d,"for","character_select"),_(d,"class","text-sm"),_(g,"id","character_select"),_(g,"class","mx-auto w-52 cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800"),_(a,"class","mx-auto my-2"),_(e,"class","bg-grad flex h-full flex-col border-slate-300 p-5 duration-200 dark:border-slate-800")},m(R,P){L(R,e,P),h(e,n),h(e,o),h(e,l),h(e,c),h(e,i),w&&w.m(i,null),h(e,u),h(e,a),h(a,d),h(a,f),h(a,p),h(a,k),h(a,g),x&&x.m(g,null),t[10](g),E||(N=[H(l,"click",t[7]),H(g,"change",t[11])],E=!0)},p(R,[P]){v===(v=y(R))&&w?w.p(R,P):(w&&w.d(1),w=v&&v(R),w&&(w.c(),w.m(i,null))),R[4].account?x?x.p(R,P):(x=St(R),x.c(),x.m(g,null)):x&&(x.d(1),x=null)},i:I,o:I,d(R){R&&S(e),w&&w.d(),x&&x.d(),t[10](null),E=!1,re(N)}}}function hs(t,e,n){let r,o,l,c;F(t,Z,y=>n(4,r=y)),F(t,J,y=>n(12,o=y)),F(t,Fe,y=>n(5,l=y)),F(t,Y,y=>n(13,c=y));let{showPluginMenu:i=!1}=e,u,a;function d(){var v,w;if(!r.account)return;const y=u[u.selectedIndex].getAttribute("data-id");j(Z,r.character=r.account.characters.get(y),r),r.character&&((w=o.selected_characters)==null||w.set(r.account.userId,(v=r.character)==null?void 0:v.accountId)),j(Y,c=!0,c)}function f(){a.value=="RuneLite"?(j(Z,r.client=ie.runeLite,r),j(J,o.selected_client_index=ie.runeLite,o)):a.value=="HDOS"&&(j(Z,r.client=ie.hdos,r),j(J,o.selected_client_index=ie.hdos,o)),j(Y,c=!0,c)}function p(){var y,v,w,x,R,P,O,C,b,T,D,A,X,xe,dt;if(!r.account||!r.character){$("Please log in to launch a client");return}switch(r.game){case Q.osrs:switch(r.client){case ie.osrs:ht(l==="windows",!0,(y=r.credentials)==null?void 0:y.session_id,(v=r.character)==null?void 0:v.accountId,(w=r.character)==null?void 0:w.displayName);break;case ie.runeLite:Cn((x=r.credentials)==null?void 0:x.session_id,(R=r.character)==null?void 0:R.accountId,(P=r.character)==null?void 0:P.displayName);break;case ie.hdos:Pn((O=r.credentials)==null?void 0:O.session_id,(C=r.character)==null?void 0:C.accountId,(b=r.character)==null?void 0:b.displayName);break}break;case Q.rs3:l==="linux"?xn((T=r.credentials)==null?void 0:T.session_id,(D=r.character)==null?void 0:D.accountId,(A=r.character)==null?void 0:A.displayName):ht(l==="windows",!1,(X=r.credentials)==null?void 0:X.session_id,(xe=r.character)==null?void 0:xe.accountId,(dt=r.character)==null?void 0:dt.displayName);break}}on(()=>{var y;if(r.game==Q.osrs&&r.client&&n(3,a.selectedIndex=r.client,a),r.account&&((y=o.selected_characters)!=null&&y.has(r.account.userId))){for(let v=0;v<u.options.length;v++)if(u[v].getAttribute("data-id")==o.selected_characters.get(r.account.userId)){n(2,u.selectedIndex=v,u);const w=u[u.selectedIndex].getAttribute("data-id");j(Z,r.character=r.account.characters.get(w),r)}}}),De(()=>{o.selected_game_index==Q.osrs&&(n(3,a.selectedIndex=o.selected_client_index,a),j(Z,r.client=a.selectedIndex,r))});function k(y){z[y?"unshift":"push"](()=>{a=y,n(3,a)})}const g=()=>{n(0,i=K(ge)??!1)};function E(y){z[y?"unshift":"push"](()=>{u=y,n(2,u)})}const N=()=>d();return t.$$set=y=>{"showPluginMenu"in y&&n(0,i=y.showPluginMenu)},[i,d,u,a,r,l,f,p,k,g,E,N]}class bs extends ce{constructor(e){super(),le(this,e,hs,_s,oe,{showPluginMenu:0,characterChanged:1})}get characterChanged(){return this.$$.ctx[1]}}function gs(t){let e;return{c(){e=m("div"),e.innerHTML='<img src="svgs/circle-notch-solid.svg" alt="" class="mx-auto h-1/6 w-1/6 animate-spin"/>',_(e,"class","container mx-auto bg-slate-100 p-5 text-center text-slate-900 dark:bg-slate-900 dark:text-slate-50")},m(n,r){L(n,e,r)},p:I,i:I,o:I,d(n){n&&S(e)}}}class ms extends ce{constructor(e){super(),le(this,e,null,gs,oe,{})}}function xt(t,e,n){const r=t.slice();return r[23]=e[n][0],r[22]=e[n][1],r}function Ct(t,e,n){const r=t.slice();return r[27]=e[n],r}function ks(t){let e;return{c(){e=m("p"),e.textContent="error"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function ws(t){let e;function n(l,c){return l[26].length==0?vs:ys}let r=n(t),o=r(t);return{c(){o.c(),e=_e()},m(l,c){o.m(l,c),L(l,e,c)},p(l,c){r===(r=n(l))&&o?o.p(l,c):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&S(e),o.d(l)}}}function ys(t){let e,n=pe(t[26]),r=[];for(let o=0;o<n.length;o+=1)r[o]=Tt(Ct(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=_e()},m(o,l){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(o,l);L(o,e,l)},p(o,l){if(l&22){n=pe(o[26]);let c;for(c=0;c<n.length;c+=1){const i=Ct(o,n,c);r[c]?r[c].p(i,l):(r[c]=Tt(i),r[c].c(),r[c].m(e.parentNode,e))}for(;c<r.length;c+=1)r[c].d(1);r.length=n.length}},d(o){o&&S(e),He(r,o)}}}function vs(t){let e;return{c(){e=m("p"),e.textContent="(start an RS3 game client with plugins enabled and it will be listed here.)"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Tt(t){let e,n=(t[27].identity||Et)+"",r,o,l,c,i,u;function a(){return t[14](t[27])}return{c(){e=m("button"),r=G(n),l=M(),c=m("br"),_(e,"class",o="m-1 h-[28px] w-[95%] rounded-lg border-2 "+(t[4]&&t[1]===t[27].uid?"border-black bg-blue-500 text-black":"border-blue-500 text-black dark:text-white")+" hover:opacity-75")},m(d,f){L(d,e,f),h(e,r),L(d,l,f),L(d,c,f),i||(u=H(e,"click",a),i=!0)},p(d,f){t=d,f&4&&n!==(n=(t[27].identity||Et)+"")&&ae(r,n),f&22&&o!==(o="m-1 h-[28px] w-[95%] rounded-lg border-2 "+(t[4]&&t[1]===t[27].uid?"border-black bg-blue-500 text-black":"border-blue-500 text-black dark:text-white")+" hover:opacity-75")&&_(e,"class",o)},d(d){d&&(S(e),S(l),S(c)),i=!1,u()}}}function Ss(t){let e;return{c(){e=m("p"),e.textContent="loading..."},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Ls(t){let e;return{c(){e=m("p"),e.textContent="error"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function xs(t){let e,n,r,o,l,c=pe(Object.entries(t[7])),i=[];for(let f=0;f<c.length;f+=1)i[f]=Pt(xt(t,c,f));function u(f,p){return f[4]?Cs:Ts}let a=u(t),d=a(t);return{c(){e=m("select");for(let f=0;f<i.length;f+=1)i[f].c();n=M(),d.c(),r=_e(),_(e,"class","mx-auto mb-4 w-[min(280px,_45%)] cursor-pointer rounded-lg border-2 border-slate-300 bg-inherit p-2 text-inherit duration-200 hover:opacity-75 dark:border-slate-800"),t[0]===void 0&&Je(()=>t[15].call(e))},m(f,p){L(f,e,p);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(e,null);pt(e,t[0],!0),L(f,n,p),d.m(f,p),L(f,r,p),o||(l=H(e,"change",t[15]),o=!0)},p(f,p){if(p&128){c=pe(Object.entries(f[7]));let k;for(k=0;k<c.length;k+=1){const g=xt(f,c,k);i[k]?i[k].p(g,p):(i[k]=Pt(g),i[k].c(),i[k].m(e,null))}for(;k<i.length;k+=1)i[k].d(1);i.length=c.length}p&129&&pt(e,f[0]),a===(a=u(f))&&d?d.p(f,p):(d.d(1),d=a(f),d&&(d.c(),d.m(r.parentNode,r)))},d(f){f&&(S(e),S(n),S(r)),He(i,f),d.d(f),o=!1,l()}}}function Pt(t){let e,n=(t[22].name??je)+"",r,o;return{c(){e=m("option"),r=G(n),_(e,"class","dark:bg-slate-900"),e.__value=o=t[23],be(e,e.__value)},m(l,c){L(l,e,c),h(e,r)},p(l,c){c&128&&n!==(n=(l[22].name??je)+"")&&ae(r,n),c&128&&o!==(o=l[23])&&(e.__value=o,be(e,e.__value))},d(l){l&&S(e)}}}function Cs(t){let e,n,r,o,l={ctx:t,current:null,token:null,hasCatch:!0,pending:Os,then:Rs,catch:Ps,value:22};return Ee(o=t[6],l),{c(){e=m("br"),n=M(),r=_e(),l.block.c()},m(c,i){L(c,e,i),L(c,n,i),L(c,r,i),l.block.m(c,l.anchor=i),l.mount=()=>r.parentNode,l.anchor=r},p(c,i){t=c,l.ctx=t,i&64&&o!==(o=t[6])&&Ee(o,l)||lt(l,t,i)},d(c){c&&(S(e),S(n),S(r)),l.block.d(c),l.token=null,l=null}}}function Ts(t){let e,n,r,o,l,c,i,u,a;function d(k,g){return g&128&&(c=null),c==null&&(c=Object.entries(k[7]).length!==0),c?Hs:js}let f=d(t,-1),p=f(t);return{c(){e=m("button"),n=G("+"),r=M(),o=m("br"),l=M(),p.c(),i=_e(),_(e,"class","aspect-square w-8 rounded-lg border-2 border-blue-500 text-[20px] font-bold duration-200 enabled:hover:opacity-75 disabled:border-gray-500"),e.disabled=t[3]},m(k,g){L(k,e,g),h(e,n),L(k,r,g),L(k,o,g),L(k,l,g),p.m(k,g),L(k,i,g),u||(a=H(e,"click",t[9]),u=!0)},p(k,g){g&8&&(e.disabled=k[3]),f===(f=d(k,g))&&p?p.p(k,g):(p.d(1),p=f(k),p&&(p.c(),p.m(i.parentNode,i)))},d(k){k&&(S(e),S(r),S(o),S(l),S(i)),p.d(k),u=!1,a()}}}function Ps(t){let e;return{c(){e=m("p"),e.textContent="error"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Rs(t){let e,n;function r(c,i){return i&193&&(e=null),e==null&&(e=!!(c[22]&&c[22].main&&Object.keys(c[7]).includes(c[0]))),e?Ms:Es}let o=r(t,-1),l=o(t);return{c(){l.c(),n=_e()},m(c,i){l.m(c,i),L(c,n,i)},p(c,i){o===(o=r(c,i))&&l?l.p(c,i):(l.d(1),l=o(c),l&&(l.c(),l.m(n.parentNode,n)))},d(c){c&&S(n),l.d(c)}}}function Es(t){let e;return{c(){e=m("p"),e.textContent="can't start plugin: does not appear to be configured"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Ms(t){let e;function n(l,c){return l[7][l[0]].path?Is:Ns}let r=n(t),o=r(t);return{c(){o.c(),e=_e()},m(l,c){o.m(l,c),L(l,e,c)},p(l,c){r===(r=n(l))&&o?o.p(l,c):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&S(e),o.d(l)}}}function Ns(t){let e;return{c(){e=m("p"),e.textContent="can't start plugin: no path is configured"},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Is(t){let e,n,r=t[22].name+"",o,l,c;function i(){return t[18](t[22])}return{c(){e=m("button"),n=G("Start "),o=G(r),_(e,"class","mx-auto mb-1 w-auto rounded-lg bg-emerald-500 p-2 font-bold text-black duration-200 hover:opacity-75")},m(u,a){L(u,e,a),h(e,n),h(e,o),l||(c=H(e,"click",i),l=!0)},p(u,a){t=u,a&64&&r!==(r=t[22].name+"")&&ae(o,r)},d(u){u&&S(e),l=!1,c()}}}function Os(t){let e;return{c(){e=m("p"),e.textContent="loading..."},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function js(t){let e;return{c(){e=m("p"),e.textContent=`You have no plugins installed. Click the + button and select a plugin's bolt.json file
							to add it.`},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function Hs(t){let e=Object.keys(K(fe)).includes(t[0])&&t[6]!==null,n,r=e&&Rt(t);return{c(){r&&r.c(),n=_e()},m(o,l){r&&r.m(o,l),L(o,n,l)},p(o,l){l&65&&(e=Object.keys(K(fe)).includes(o[0])&&o[6]!==null),e?r?r.p(o,l):(r=Rt(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(o){o&&S(n),r&&r.d(o)}}}function Rt(t){let e,n,r,o,l,c,i,u={ctx:t,current:null,token:null,hasCatch:!0,pending:Us,then:Ds,catch:As,value:22};return Ee(e=t[6],u),{c(){u.block.c(),n=M(),r=m("button"),r.textContent="Remove",o=M(),l=m("button"),l.textContent="Reload",_(r,"class","mx-auto mb-1 w-[min(144px,_25%)] rounded-lg p-2 font-bold text-black duration-200 enabled:bg-rose-500 enabled:hover:opacity-75 disabled:bg-gray-500"),_(l,"class","mx-auto mb-1 w-[min(144px,_25%)] rounded-lg p-2 font-bold text-black duration-200 enabled:bg-blue-500 enabled:hover:opacity-75 disabled:bg-gray-500")},m(a,d){u.block.m(a,u.anchor=d),u.mount=()=>n.parentNode,u.anchor=n,L(a,n,d),L(a,r,d),L(a,o,d),L(a,l,d),c||(i=[H(r,"click",t[16]),H(l,"click",t[17])],c=!0)},p(a,d){t=a,u.ctx=t,d&64&&e!==(e=t[6])&&Ee(e,u)||lt(u,t,d)},d(a){a&&(S(n),S(r),S(o),S(l)),u.block.d(a),u.token=null,u=null,c=!1,re(i)}}}function As(t){let e,n,r;return{c(){e=m("p"),e.textContent="error",n=M(),r=m("br")},m(o,l){L(o,e,l),L(o,n,l),L(o,r,l)},p:I,d(o){o&&(S(e),S(n),S(r))}}}function Ds(t){let e,n=(t[22].name??je)+"",r,o,l,c=(t[22].description??"no description")+"",i,u,a,d;return{c(){e=m("p"),r=G(n),o=M(),l=m("p"),i=G(c),a=M(),d=m("br"),_(e,"class","pb-4 text-xl font-bold"),_(l,"class",u=t[22].description?null:"italic")},m(f,p){L(f,e,p),h(e,r),L(f,o,p),L(f,l,p),h(l,i),L(f,a,p),L(f,d,p)},p(f,p){p&64&&n!==(n=(f[22].name??je)+"")&&ae(r,n),p&64&&c!==(c=(f[22].description??"no description")+"")&&ae(i,c),p&64&&u!==(u=f[22].description?null:"italic")&&_(l,"class",u)},d(f){f&&(S(e),S(o),S(l),S(a),S(d))}}}function Us(t){let e;return{c(){e=m("p"),e.textContent="loading..."},m(n,r){L(n,e,r)},p:I,d(n){n&&S(e)}}}function qs(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N,y,v,w;n=new at({}),n.$on("click",t[11]);let x={ctx:t,current:null,token:null,hasCatch:!0,pending:Ss,then:ws,catch:ks,value:26};Ee(g=t[2],x);function R(C,b){return ge?xs:Ls}let O=R()(t);return{c(){e=m("div"),ne(n.$$.fragment),r=M(),o=m("div"),l=m("button"),l.innerHTML='<img src="svgs/xmark-solid.svg" class="h-5 w-5" alt="Close"/>',c=M(),i=m("div"),u=m("button"),a=G("Manage Plugins"),f=M(),p=m("hr"),k=M(),x.block.c(),E=M(),N=m("div"),O.c(),_(l,"class","absolute right-3 top-3 rounded-full bg-rose-500 p-[2px] shadow-lg duration-200 hover:rotate-90 hover:opacity-75"),_(u,"class",d="mx-auto mb-2 w-[95%] rounded-lg border-2 "+(t[4]?"border-blue-500 text-black dark:text-white":"border-black bg-blue-500 text-black")+" p-2 font-bold hover:opacity-75"),_(p,"class","p-1 dark:border-slate-700"),_(i,"class","left-0 float-left h-full w-[min(180px,_50%)] overflow-hidden border-r-2 border-slate-300 pt-2 dark:border-slate-800"),_(N,"class","h-full pt-10"),_(o,"class","absolute left-[5%] top-[5%] z-20 h-[90%] w-[90%] rounded-lg bg-slate-100 text-center shadow-lg dark:bg-slate-900")},m(C,b){L(C,e,b),ee(n,e,null),h(e,r),h(e,o),h(o,l),h(o,c),h(o,i),h(i,u),h(u,a),h(i,f),h(i,p),h(i,k),x.block.m(i,x.anchor=null),x.mount=()=>i,x.anchor=null,h(o,E),h(o,N),O.m(N,null),y=!0,v||(w=[H(l,"click",t[11]),H(u,"click",t[13])],v=!0)},p(C,[b]){t=C,(!y||b&16&&d!==(d="mx-auto mb-2 w-[95%] rounded-lg border-2 "+(t[4]?"border-blue-500 text-black dark:text-white":"border-black bg-blue-500 text-black")+" p-2 font-bold hover:opacity-75"))&&_(u,"class",d),x.ctx=t,b&4&&g!==(g=t[2])&&Ee(g,x)||lt(x,t,b),O.p(t,b)},i(C){y||(U(n.$$.fragment,C),y=!0)},o(C){B(n.$$.fragment,C),y=!1},d(C){C&&S(e),te(n),x.block.d(),x.token=null,x=null,O.d(),v=!1,re(w)}}}const je="(unnamed)",Et="(new character)";function Bs(t,e,n){let r,o,l;F(t,et,b=>n(2,o=b)),F(t,fe,b=>n(7,l=b));let{showPluginMenu:c}=e;const i=b=>new Promise((T,D)=>{const A=b.concat(b.endsWith("/")?"bolt.json":"/bolt.json");var X=new XMLHttpRequest;X.onreadystatechange=()=>{X.readyState==4&&(X.status==200?T(JSON.parse(X.responseText)):D(X.responseText))},X.open("GET","/read-json-file?".concat(new URLSearchParams({path:A}).toString()),!0),X.send()}),u=b=>{const D=K(fe)[b];if(!D)return null;const A=D.path;return A?i(A):null},a=(b,T)=>{i(b).then(D=>{do n(0,E=crypto.randomUUID());while(Object.keys(K(fe)).includes(E));j(fe,l[E]={name:D.name??je,path:b},l),n(5,v=!0)}).catch(D=>{console.error(`Config file '${T}' couldn't be fetched, reason: ${D}`)})};let d=!1;const f=()=>{n(3,d=!0);var b=new XMLHttpRequest;b.onreadystatechange=()=>{if(b.readyState==4&&(n(3,d=!1),b.status==200)){const T=K(Fe)==="windows"?b.responseText.replaceAll("\\","/"):b.responseText;if(T.endsWith("/bolt.json")){const D=T.substring(0,T.length-9);a(D,T)}else console.log(`Selection '${T}' is not named bolt.json; ignored`)}},b.open("GET","/json-file-picker",!0),b.send()};et.set(Zt());const p=(b,T,D,A)=>{var X=new XMLHttpRequest;X.onreadystatechange=()=>{X.readyState==4&&$(`Start-plugin status: ${X.statusText.trim()}`)},X.open("GET","/start-plugin?".concat(new URLSearchParams({client:b,id:T,path:D,main:A}).toString()),!0),X.send()},k=()=>{d||n(12,c=!1)};function g(b){b.key==="Escape"&&k()}addEventListener("keydown",g);var E,N=!1,y;let v=!1;rt(()=>{v&&Rn(),removeEventListener("keydown",g)});const w=()=>n(4,N=!1),x=b=>{n(1,y=b.uid),n(4,N=!0)};function R(){E=sn(this),n(0,E)}const P=()=>{n(6,r=null),n(5,v=!0);let b=K(fe);delete b[E],fe.set(b)},O=()=>n(6,r=u(E)),C=b=>p(y,E,l[E].path??"",b.main??"");return t.$$set=b=>{"showPluginMenu"in b&&n(12,c=b.showPluginMenu)},t.$$.update=()=>{t.$$.dirty&6&&o.then(b=>{b.some(T=>T.uid===y)||n(4,N=!1)}),t.$$.dirty&1&&n(6,r=u(E))},[E,y,o,d,N,v,r,l,u,f,p,k,c,w,x,R,P,O,C]}class $s extends ce{constructor(e){super(),le(this,e,Bs,qs,oe,{showPluginMenu:12})}}function Js(t){let e,n,r,o,l,c,i,u,a,d,f,p,k,g,E,N,y=t[1]&&Mt(t),v=t[0]&&Nt(t),w=t[3]&&It();function x(C){t[6](C)}let R={};t[0]!==void 0&&(R.showSettings=t[0]),o=new An({props:R}),z.push(()=>Oe(o,"showSettings",x));function P(C){t[7](C)}let O={};return t[1]!==void 0&&(O.showPluginMenu=t[1]),d=new bs({props:O}),z.push(()=>Oe(d,"showPluginMenu",P)),E=new as({}),{c(){y&&y.c(),e=M(),v&&v.c(),n=M(),w&&w.c(),r=M(),ne(o.$$.fragment),c=M(),i=m("div"),u=m("div"),a=M(),ne(d.$$.fragment),p=M(),k=m("div"),g=M(),ne(E.$$.fragment),_(i,"class","mt-16 grid h-full grid-flow-col grid-cols-3")},m(C,b){y&&y.m(C,b),L(C,e,b),v&&v.m(C,b),L(C,n,b),w&&w.m(C,b),L(C,r,b),ee(o,C,b),L(C,c,b),L(C,i,b),h(i,u),h(i,a),ee(d,i,null),h(i,p),h(i,k),L(C,g,b),ee(E,C,b),N=!0},p(C,b){C[1]?y?(y.p(C,b),b&2&&U(y,1)):(y=Mt(C),y.c(),U(y,1),y.m(e.parentNode,e)):y&&(ve(),B(y,1,1,()=>{y=null}),Se()),C[0]?v?(v.p(C,b),b&1&&U(v,1)):(v=Nt(C),v.c(),U(v,1),v.m(n.parentNode,n)):v&&(ve(),B(v,1,1,()=>{v=null}),Se()),C[3]?w?b&8&&U(w,1):(w=It(),w.c(),U(w,1),w.m(r.parentNode,r)):w&&(ve(),B(w,1,1,()=>{w=null}),Se());const T={};!l&&b&1&&(l=!0,T.showSettings=C[0],Ie(()=>l=!1)),o.$set(T);const D={};!f&&b&2&&(f=!0,D.showPluginMenu=C[1],Ie(()=>f=!1)),d.$set(D)},i(C){N||(U(y),U(v),U(w),U(o.$$.fragment,C),U(d.$$.fragment,C),U(E.$$.fragment,C),N=!0)},o(C){B(y),B(v),B(w),B(o.$$.fragment,C),B(d.$$.fragment,C),B(E.$$.fragment,C),N=!1},d(C){C&&(S(e),S(n),S(r),S(c),S(i),S(g)),y&&y.d(C),v&&v.d(C),w&&w.d(C),te(o,C),te(d),te(E,C)}}}function Gs(t){let e,n;return e=new ms({}),{c(){ne(e.$$.fragment)},m(r,o){ee(e,r,o),n=!0},p:I,i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function Mt(t){let e,n,r;function o(c){t[4](c)}let l={};return t[1]!==void 0&&(l.showPluginMenu=t[1]),e=new $s({props:l}),z.push(()=>Oe(e,"showPluginMenu",o)),{c(){ne(e.$$.fragment)},m(c,i){ee(e,c,i),r=!0},p(c,i){const u={};!n&&i&2&&(n=!0,u.showPluginMenu=c[1],Ie(()=>n=!1)),e.$set(u)},i(c){r||(U(e.$$.fragment,c),r=!0)},o(c){B(e.$$.fragment,c),r=!1},d(c){te(e,c)}}}function Nt(t){let e,n,r;function o(c){t[5](c)}let l={};return t[0]!==void 0&&(l.showSettings=t[0]),e=new rs({props:l}),z.push(()=>Oe(e,"showSettings",o)),{c(){ne(e.$$.fragment)},m(c,i){ee(e,c,i),r=!0},p(c,i){const u={};!n&&i&1&&(n=!0,u.showSettings=c[0],Ie(()=>n=!1)),e.$set(u)},i(c){r||(U(e.$$.fragment,c),r=!0)},o(c){B(e.$$.fragment,c),r=!1},d(c){te(e,c)}}}function It(t){let e,n;return e=new $n({}),{c(){ne(e.$$.fragment)},m(r,o){ee(e,r,o),n=!0},i(r){n||(U(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){te(e,r)}}}function Xs(t){let e,n,r,o;const l=[Gs,Js],c=[];function i(u,a){return u[2]?0:1}return n=i(t),r=c[n]=l[n](t),{c(){e=m("main"),r.c(),_(e,"class","h-full")},m(u,a){L(u,e,a),c[n].m(e,null),o=!0},p(u,[a]){let d=n;n=i(u),n===d?c[n].p(u,a):(ve(),B(c[d],1,1,()=>{c[d]=null}),Se(),r=c[n],r?r.p(u,a):(r=c[n]=l[n](u),r.c()),U(r,1),r.m(e,null))},i(u){o||(U(r),o=!0)},o(u){B(r),o=!1},d(u){u&&S(e),c[n].d()}}}function zs(t,e,n){let r;F(t,Xe,p=>n(3,r=p));let o=!1,l=!1,c=!1;mn();const i=window.opener||window.parent;if(i){const p=new URLSearchParams(window.location.search);p.get("id_token")?(c=!0,i.postMessage({type:"gameSessionServerAuth",code:p.get("code"),id_token:p.get("id_token"),state:p.get("state")},"*")):p.get("code")&&(c=!0,i.postMessage({type:"authCode",code:p.get("code"),state:p.get("state")},"*"))}function u(p){l=p,n(1,l)}function a(p){o=p,n(0,o)}function d(p){o=p,n(0,o)}function f(p){l=p,n(1,l)}return[o,l,c,r,u,a,d,f]}class Fs extends ce{constructor(e){super(),le(this,e,zs,Xs,oe,{})}}new Fs({target:document.getElementById("app")});const ue=[],Ws=K(Ut);let V;ue.push(ct.subscribe(t=>V=t));let se;ue.push(J.subscribe(t=>se=t));ue.push(Fe.subscribe(t=>t));let ke;ue.push(ye.subscribe(t=>ke=t));ue.push(ge.subscribe(t=>t??!1));let de;ue.push(We.subscribe(t=>de=t));let ut;ue.push(it.subscribe(t=>ut=t));ue.push(Le.subscribe(t=>t));ue.push(Ge.subscribe(t=>t));let ze;ue.push(Z.subscribe(t=>ze=t));function Vs(){var o;const t=atob(V.origin),e=atob(V.clientid),n=t.concat("/oauth2/token");ke.size==0&&Xe.set(!0),bn(),se.selected_game_accounts&&((o=se.selected_game_accounts)==null?void 0:o.size)>0&&J.update(l=>{var c;return l.selected_characters=l.selected_game_accounts,(c=l.selected_game_accounts)==null||c.clear(),l});const r=[Ws,t,atob(V.origin_2fa)];window.addEventListener("message",l=>{if(!r.includes(l.origin)){$(`discarding window message from origin ${l.origin}`);return}let c=de;const i=new XMLHttpRequest;switch(l.data.type){case"authCode":if(c){We.set({});const u=new URLSearchParams({grant_type:"authorization_code",client_id:atob(V.clientid),code:l.data.code,code_verifier:c.verifier,redirect_uri:atob(V.redirect)});i.onreadystatechange=()=>{if(i.readyState==4)if(i.status==200){const a=zt(i.response),d=Dt(a);d?_t(c==null?void 0:c.win,d).then(f=>{f&&(ye.update(p=>(p.set(d.sub,d),p)),Me())}):(q("Error: invalid credentials received",!1),c.win.close())}else q(`Error: from ${n}: ${i.status}: ${i.response}`,!1),c.win.close()},i.open("POST",n,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("Accept","application/json"),i.send(u)}break;case"externalUrl":i.onreadystatechange=()=>{i.readyState==4&&$(`External URL status: '${i.responseText.trim()}'`)},i.open("POST","/open-external-url",!0),i.send(l.data.url);break;case"gameSessionServerAuth":if(c=ut.find(u=>l.data.state==u.state),c){gn(c,!0);const u=l.data.id_token.split(".");if(u.length!==3){q(`Malformed id_token: ${u.length} sections, expected 3`,!1);break}const a=JSON.parse(atob(u[0]));if(a.typ!=="JWT"){q(`Bad id_token header: typ ${a.typ}, expected JWT`,!1);break}const d=JSON.parse(atob(u[1]));if(atob(d.nonce)!==c.nonce){q("Incorrect nonce in id_token",!1);break}const f=atob(V.auth_api).concat("/sessions");i.onreadystatechange=()=>{if(i.readyState==4)if(i.status==200){const p=atob(V.auth_api).concat("/accounts");c.creds.session_id=JSON.parse(i.response).sessionId,Wt(c.creds,p,c.account_info_promise).then(k=>{k&&(ye.update(g=>{var E;return g.set((E=c==null?void 0:c.creds)==null?void 0:E.sub,c.creds),g}),Me())})}else q(`Error: from ${f}: ${i.status}: ${i.response}`,!1)},i.open("POST",f,!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Accept","application/json"),i.send(`{"idToken": "${l.data.id_token}"}`)}break;case"gameClientListUpdate":et.set(Zt());break;default:$("Unknown message type: ".concat(l.data.type));break}}),(async()=>(ke.size>0&&ke.forEach(async l=>{const c=await Xt(l,n,e);c!==null&&c!==0&&(q(`Discarding expired login for #${l.sub}`,!1),ye.update(u=>(u.delete(l.sub),u)),Me());let i;if(c===null&&await _t(null,l)?i={creds:l,valid:!0}:i={creds:l,valid:c===0},i.valid){const u=l;ye.update(a=>(a.set(u.sub,u),a)),Me()}}),Y.set(!1)))()}function $(t){console.log(t);const e={isError:!1,text:t,time:new Date(Date.now())};Le.update(n=>(n.unshift(e),n))}function q(t,e){const n={isError:!0,text:t,time:new Date(Date.now())};if(Le.update(r=>(r.unshift(n),r)),!e)console.error(t);else throw new Error(t)}ct.set(s());onload=()=>Vs();onunload=()=>{for(const t in ue)delete ue[t];Ue()};
